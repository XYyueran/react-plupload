{"version":3,"sources":["../src/Plupload.js"],"names":["count","EVENTS","Plupload","id","Date","valueOf","state","files","uploadState","progress","runUploader","bind","getComponentId","refresh","initUploader","list","clearAllFiles","clearFailedFiles","removeFile","doUpload","window","plupload","undefined","self","uploader","init","forEach","event","handler","props","up","get","f","map","file","push","setState","autoUpload","start","rmFiles","stateFiles","filter","console","log","find","STARTED","val","key","uploaded","err","isUndefined","error","stateProgress","percent","checkUploader","setTimeout","warn","Uploader","extend","container","runtimes","multipart","chunk_size","browse_button","url","flash_swf_url","e","preventDefault","delButton","createElement","onClick","className","progressBar","role","style","width","errorDiv","code","message","bgSuccess","name","propsSelect","type","content","buttonSelect","propsUpload","buttonUpload","length","disabled","Component","propTypes","func","string","isRequired","bool"],"mappings":"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","file":"Plupload.js","sourcesContent":["import _ from 'lodash';\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BrowseButton from './BrowseButton';\r\nimport UploadButton from './UploadButton';\r\n\r\nlet count = 0;\r\nconst EVENTS = [\r\n  'PostInit', 'Browse', 'Refresh', 'StateChanged', 'QueueChanged', 'OptionChanged',\r\n  'BeforeUpload', 'UploadProgress', 'FileFiltered', 'FilesAdded', 'FilesRemoved', 'FileUploaded', 'ChunkUploaded',\r\n  'UploadComplete', 'Destroy', 'Error'\r\n];\r\n\r\nclass Plupload extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.id =new Date().valueOf();\r\n    this.state = {files: [], uploadState: false, progress: {}};\r\n    this.runUploader = this.runUploader.bind(this);\r\n    this.getComponentId = this.getComponentId.bind(this);\r\n    this.refresh = this.refresh.bind(this);\r\n    this.initUploader = this.initUploader.bind(this);\r\n    this.list = this.list.bind(this);\r\n    this.clearAllFiles = this.clearAllFiles.bind(this);\r\n    this.clearFailedFiles = this.clearFailedFiles.bind(this);\r\n    this.removeFile = this.removeFile.bind(this);\r\n    this.doUpload = this.doUpload.bind(this);\r\n  }\r\n\r\n  checkUploader() {\r\n    return window.plupload !== undefined;\r\n  }\r\n\r\n  runUploader() {\r\n    const self = this;\r\n    this.initUploader();\r\n    this.uploader.init();\r\n\r\n    EVENTS.forEach(function(event) {\r\n      const handler = self.props['on' + event];\r\n      if (typeof handler === 'function') {\r\n        self.uploader.bind(event, handler);\r\n      }\r\n    });\r\n\r\n    // Put the selected files into the current state\r\n    this.uploader.bind('FilesAdded', (up, files) => {\r\n      if (_.get(self.props, 'multi_selection') === false) {\r\n        self.clearAllFiles();\r\n      } else {\r\n        self.clearFailedFiles();\r\n      }\r\n\r\n      const f = self.state.files;\r\n      _.map(files, (file) => {\r\n        f.push(file);\r\n      });\r\n      self.setState({files: f}, ()=> {\r\n        if (self.props.autoUpload === true) {\r\n          self.uploader.start();\r\n        }\r\n      });\r\n    });\r\n\r\n    this.uploader.bind('FilesRemoved', (up, rmFiles) => {\r\n      const stateFiles = self.state.files;\r\n      const files = _.filter(stateFiles, (file) => {\r\n        console.log(rmFiles, file);\r\n        return -1 !== _.find(rmFiles, {id: file.id});\r\n      });\r\n      self.setState({files: files});\r\n    });\r\n\r\n    this.uploader.bind('StateChanged', (up) => {\r\n      if (up.state === window.plupload.STARTED && self.state.uploadState === false) {\r\n        self.setState({uploadState: true});\r\n      }\r\n      if (up.state !== window.plupload.STARTED && self.state.uploadState === true) {\r\n        self.setState({uploadState: false});\r\n      }\r\n    });\r\n\r\n    this.uploader.bind('FileUploaded', (up, file) => {\r\n      const stateFiles = self.state.files;\r\n      _.map(stateFiles, (val, key) => {\r\n        if (val.id === file.id) {\r\n          val.uploaded = true;\r\n          stateFiles[key] = val;\r\n        }\r\n      });\r\n      self.setState({files: stateFiles}, () => {\r\n        self.removeFile(file.id);\r\n      });\r\n    });\r\n\r\n    this.uploader.bind('Error', (up, err) => {\r\n      if (_.isUndefined(err.file) !== true) {\r\n        const stateFiles = self.state.files;\r\n        _.map(stateFiles, (val, key) => {\r\n          if (val.id === err.file.id) {\r\n            val.error = err;\r\n            stateFiles[key] = val;\r\n          }\r\n        });\r\n        self.setState({files: stateFiles});\r\n      }\r\n    });\r\n\r\n    this.uploader.bind('UploadProgress', (up, file) => {\r\n      const stateProgress = self.state.progress;\r\n      stateProgress[file.id] = file.percent;\r\n      self.setState({progress: stateProgress});\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const self = this;\r\n    if(this.checkUploader()) {\r\n      this.runUploader();\r\n    } else {\r\n      setTimeout(function() {\r\n        if(self.checkUploader()) {\r\n          self.runUploader();\r\n        } else {\r\n          console.warn('Plupload has not initialized');\r\n        }\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if(this.checkUploader()) {\r\n      this.refresh();\r\n    }\r\n  }\r\n\r\n  getComponentId() {\r\n    return this.props.id || 'react_plupload_' + this.id;\r\n  }\r\n\r\n  refresh() {\r\n    // Refresh to append events to buttons again.\r\n    this.uploader.refresh();\r\n  }\r\n\r\n  initUploader() {\r\n    this.uploader = new window.plupload.Uploader(_.extend({\r\n      container:  'container' + this.id,\r\n      runtimes: 'flash',\r\n      multipart: true,\r\n      chunk_size: '1mb',\r\n      browse_button: this.getComponentId(),\r\n      url: '/upload',\r\n      flash_swf_url: '/plupload-2.1.8/js/Moxie.swf'\r\n    }, this.props));\r\n  }\r\n\r\n  // Display selected files\r\n  list() {\r\n    const self = this;\r\n    return _.map(this.state.files, (val) => {\r\n\r\n      const removeFile = (e) => {\r\n        e.preventDefault();\r\n        self.removeFile(val.id);\r\n      };\r\n      let delButton = '';\r\n      if (self.state.uploadState === false && val.uploaded !== true) {\r\n        delButton = React.createElement('button', {onClick: removeFile, className: 'pull-right'}, 'X');\r\n      }\r\n\r\n      let progressBar = '';\r\n      if (self.state.uploadState === true && val.uploaded !== true && _.isUndefined(val.error)) {\r\n        const percent = self.state.progress[val.id] || 0;\r\n        progressBar = React.createElement('div', {className: 'progress'},\r\n          React.createElement('div', {\r\n              className: 'progress-bar',\r\n              role: 'progressbar',\r\n              'aria-valuenow': percent,\r\n              'aria-valuemin': 0,\r\n              'aria-valuemax': 100,\r\n              style: {width: percent + '%'}\r\n            },\r\n            React.createElement('span', {className: 'sr-only'}, percent + 'complete')\r\n          )\r\n        );\r\n      }\r\n\r\n      let errorDiv = '';\r\n      if (!_.isUndefined(val.error)) {\r\n        errorDiv = React.createElement('div', {className: 'alert alert-danger'}, 'Error: ' + val.error.code + ', Message: ' + val.error.message);\r\n      }\r\n\r\n      let bgSuccess = '';\r\n      if (!_.isUndefined(val.uploaded)) {\r\n        bgSuccess = 'bg-success';\r\n      }\r\n\r\n      return React.createElement('li', {key: val.id},\r\n        React.createElement('p', {className: bgSuccess}, val.name, ' ', delButton), progressBar, errorDiv\r\n      );\r\n    });\r\n  }\r\n\r\n  clearAllFiles() {\r\n    _.filter(this.state.files, (file) => {\r\n      this.uploader.removeFile(file.id);\r\n    });\r\n  }\r\n\r\n  clearFailedFiles() {\r\n    _.filter(this.state.files, (file) => {\r\n      if (file.error) {\r\n        this.uploader.removeFile(file.id);\r\n      }\r\n      return !file.error;\r\n    });\r\n  }\r\n\r\n  removeFile(id) {\r\n    this.uploader.removeFile(id);\r\n    _.filter(this.state.files, (file) => {\r\n      return file.id !== id;\r\n    });\r\n  }\r\n\r\n  doUpload(e) {\r\n    e.preventDefault();\r\n    this.uploader.start();\r\n  }\r\n\r\n  render() {\r\n    const propsSelect = {\r\n      id: this.getComponentId(),\r\n      type: 'button',\r\n      content: this.props.buttonSelect || 'Browse'\r\n    };\r\n\r\n    const propsUpload = {\r\n      onClick: this.doUpload,\r\n      type: 'button',\r\n      content: this.props.buttonUpload || 'Upload'\r\n    };\r\n    if (this.state.files.length === 0) propsUpload.disabled = 'disabled';\r\n\r\n    const list = this.list();\r\n\r\n    return React.createElement('div', {className: 'my-list', id: 'container' + this.id},\r\n      React.createElement('ul', {className: 'list-unstyled'}, list),\r\n      BrowseButton(propsSelect),\r\n      UploadButton(propsUpload)\r\n    );\r\n  }\r\n}\r\n\r\nPlupload.propTypes = {\r\n    'onPostInit': PropTypes.func,\r\n    'onBrowse': PropTypes.func,\r\n    'onRefresh': PropTypes.func,\r\n    'onStateChanged': PropTypes.func,\r\n    'onQueueChanged': PropTypes.func,\r\n    'onOptionChanged': PropTypes.func,\r\n    'onBeforeUpload': PropTypes.func,\r\n    'onUploadProgress': PropTypes.func,\r\n    'onFileFiltered': PropTypes.func,\r\n    'onFilesAdded': PropTypes.func,\r\n    'onFilesRemoved': PropTypes.func,\r\n    'onFileUploaded': PropTypes.func,\r\n    'onChunkUploaded': PropTypes.func,\r\n    'onUploadComplete': PropTypes.func,\r\n    'onDestroy': PropTypes.func,\r\n    'onError': PropTypes.func,\r\n    'id': PropTypes.string.isRequired,\r\n    'buttonSelect': PropTypes.string,\r\n    'buttonUpload': PropTypes.string,\r\n    'autoUpload': PropTypes.bool\r\n};\r\n\r\nexport default Plupload;\r\n"]}